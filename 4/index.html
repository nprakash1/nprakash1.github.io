<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Project: Homographies, Warping, and Mosaics</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --ink:#222; --muted:#555; --bg:#fdfdfd; --card:#fff;
      --accent:#007acc; --accent2:#005fa3; --soft:#f0f8ff; --rule:#ddd;
    }
    *{box-sizing:border-box}
    body{
      font-family: "Segoe UI", Arial, sans-serif;
      margin: 30px;
      line-height: 1.6;
      background: var(--bg);
      color: var(--ink);
    }
    h1{
      text-align: center;
      margin-bottom: 25px;
      font-size: 2.2em;
      color: var(--ink);
      letter-spacing: 0.5px;
    }
    h2{
      margin-top: 40px;
      padding-left: 12px;
      font-size: 1.5em;
      font-weight: 600;
      color: #005fa3;
      border-left: 6px solid var(--accent);
      background: linear-gradient(to right, var(--soft), #ffffff);
      border-radius: 4px;
      padding-top: 6px;
      padding-bottom: 6px;
    }
    h3{ margin: 14px 0 4px; }
    small{ display:block; font-size:.85em; color:var(--muted); margin-top:4px; }
    p{ margin: 12px 0; }
    code, pre{
      background:#f6f8fa; border:1px solid #eee; border-radius:6px;
      padding: 2px 6px; font-size: .95em;
    }
    pre{
      padding: 10px 12px; overflow:auto; white-space:pre-wrap; word-break:break-word;
    }
    .row{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
    .cap{ min-width:260px; }
    .grid{ display:flex; flex-wrap:wrap; gap:12px; }
    figure{
      margin:0; background:var(--card); border:1px solid var(--rule);
      border-radius:10px; padding:10px; box-shadow:2px 2px 6px rgba(0,0,0,0.08);
      max-width: 340px;
    }
    figure img{
      width:100%; height:auto; border-radius:6px; border:1px solid #eee;
      transition: transform .15s ease;
    }
    figure img:hover{ transform:scale(1.02); }
    figcaption{ font-size:.92em; color:var(--muted); margin-top:6px; }
    .pill{ display:inline-block; background:#eef6ff; color:#084b83; border:1px solid #d7eaff; padding:.2em .55em; border-radius:999px; font-size:.85em; }
    .split{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
    .callout{
      border-left: 4px solid var(--accent); background:#f7fbff; padding:10px 12px; border-radius:6px;
    }
    .footer{
      margin-top: 40px; padding-top: 12px; border-top:1px solid var(--rule);
      display:flex; gap:10px; flex-wrap:wrap;
    }
    a.button{
      display:inline-block; text-decoration:none; color:#fff; background:var(--accent);
      padding:8px 14px; border-radius:8px; font-weight:600;
    }
    a.button:hover{ background:var(--accent2); }
    @media (max-width: 900px){
      .split{ grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

  <h1>Image Warping & Mosaicing (A.2–A.4)</h1>

  <h2>Overview</h2>
  <p>
    This project implements the full pipeline for planar image mosaicing:
    <span class="pill">A.2</span> recover a homography <code>p' = H p</code> via least squares from point correspondences,
    <span class="pill">A.3</span> inverse warp images with two interpolation schemes (nearest &amp; bilinear), and
    <span class="pill">A.4</span> blend registered views into mosaics using feathered alpha weights.
  </p>

  <!-- ====================== A.2 ====================== -->
  <h2>A.2 – Recover Homographies</h2>
  <p>
    For each image pair, I selected ≥8 corresponding points and solved the linear system
    <code>A h = b</code> for the 8 unknowns in <code>H</code> (with <code>H[2,2]=1</code>).
    Below: point overlays and the recovered <code>H</code> matrices.
  </p>

  <div class="grid">
    <!-- Pair 1 -->
    <figure>
      <img src="./media/a2_pair1_points.jpg" alt="A.2 Pair 1 point overlays">
      <figcaption>
        Pair 1: correspondences (yellow).<br>
        <small><strong>H (im1→im2)</strong> saved in <code>media/a2_pair1_H.txt</code>.</small>
      </figcaption>
    </figure>

    <!-- Pair 2 -->
    <figure>
      <img src="./media/a2_pair2_points.jpg" alt="A.2 Pair 2 point overlays">
      <figcaption>
        Pair 2: correspondences (yellow).<br>
        <small><strong>H (im1→im2)</strong> saved in <code>media/a2_pair2_H.txt</code>.</small>
      </figcaption>
    </figure>
  </div>

  <div class="callout" style="margin-top:12px;">
    <strong>System of equations:</strong>
    For each match <code>(x,y)↔(u,v)</code> we add
    <pre>[x y 1  0 0 0  -u·x  -u·y] · [a b c d e f g h]^T = u
[0 0 0  x y 1  -v·x  -v·y] · [a b c d e f g h]^T = v</pre>
    Then <code>H = [[a b c],[d e f],[g h 1]]</code>.
  </div>

  <!-- ====================== A.3 ====================== -->
  <h2>A.3 – Warp the Images</h2>
  <p>
    Using inverse warping, I implemented:
    <code>warpImageNearestNeighbor</code> (fast, blocky) and
    <code>warpImageBilinear</code> (smooth). I also rectified planar objects
    by mapping clicked quadrilaterals to a square canvas.
  </p>

  <div class="split">
    <figure>
      <img src="./media/a3_rect_nn.jpg" alt="Rectification with nearest neighbor">
      <figcaption>Rectification (Nearest Neighbor).<br><small>Aliasing visible, but very fast.</small></figcaption>
    </figure>
    <figure>
      <img src="./media/a3_rect_bilinear.jpg" alt="Rectification with bilinear">
      <figcaption>Rectification (Bilinear).<br><small>Sharper edges with less blockiness.</small></figcaption>
    </figure>
  </div>

  <div class="grid" style="margin-top:12px;">
    <figure>
      <img src="./media/a3_warp_pair_nn.jpg" alt="Warp pair NN">
      <figcaption>Pair warp into reference (Nearest Neighbor).</figcaption>
    </figure>
    <figure>
      <img src="./media/a3_warp_pair_bilinear.jpg" alt="Warp pair Bilinear">
      <figcaption>Pair warp into reference (Bilinear).</figcaption>
    </figure>
  </div>

  <!-- ====================== A.4 ====================== -->
  <h2>A.4 – Mosaic Blending</h2>
  <p>
    After registering images into a single canvas, I blend them with simple
    feathered weights (<em>distance to image edges</em>) multiplied by coverage (alpha).
    Below are three mosaics and the sources used for each.
  </p>

  <!-- Mosaic 1 -->
  <h3>Mosaic 1</h3>
  <div class="row">
    <div class="cap">
      <small>Sources</small>
      <div class="pill">IMG_A</div>
      <div class="pill">IMG_B</div>
      <div class="pill">IMG_C</div>
    </div>
    <img src="./media/a4_mosaic1.jpg" alt="Mosaic 1">
  </div>

  <!-- Mosaic 2 -->
  <h3>Mosaic 2</h3>
  <div class="row">
    <div class="cap">
      <small>Sources</small>
      <div class="pill">IMG_1</div>
      <div class="pill">IMG_2</div>
    </div>
    <img src="./media/a4_mosaic2.jpg" alt="Mosaic 2">
  </div>

  <!-- Mosaic 3 -->
  <h3>Mosaic 3</h3>
  <div class="row">
    <div class="cap">
      <small>Sources</small>
      <div class="pill">IMG_x</div>
      <div class="pill">IMG_y</div>
      <div class="pill">IMG_z</div>
    </div>
    <img src="./media/a4_mosaic3.jpg" alt="Mosaic 3">
  </div>

  <h2>Notes on Quality</h2>
  <ul>
    <li><strong>Planarity matters:</strong> points must lie on (or very near) a single plane.</li>
    <li><strong>Coverage & overlap:</strong> aim for 40–70% overlap for robust registration.</li>
    <li><strong>Nearest vs. Bilinear:</strong> nearest is faster; bilinear reduces aliasing artifacts.</li>
    <li><strong>Feathering:</strong> distance-to-edge weighting reduces seams; alpha ensures only valid pixels contribute.</li>
  </ul>

  <div class="footer">
    <a class="button" href="./media/a2_pair1_H.txt" download>Download H (Pair 1)</a>
    <a class="button" href="./media/a2_pair2_H.txt" download>Download H (Pair 2)</a>
  </div>
</body>
</html>

