<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Image Warping & Mosaicing (A.1–A.4)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --ink:#222; --muted:#555; --bg:#fdfdfd; --card:#fff;
      --accent:#007acc; --accent2:#005fa3; --soft:#f0f8ff; --rule:#ddd;
    }
    *{box-sizing:border-box}
    body{
      font-family: "Segoe UI", Arial, sans-serif;
      margin: 28px;
      line-height: 1.6;
      background: var(--bg);
      color: var(--ink);
    }
    h1{
      text-align:center; margin: 0 0 26px; font-size: 2.25rem; letter-spacing:.3px;
    }
    h2{
      margin: 42px 0 12px;
      font-size: 1.6rem; font-weight: 700; color:#005fa3;
      border-left: 8px solid var(--accent);
      background: linear-gradient(to right, var(--soft), #fff);
      padding: 8px 12px; border-radius: 6px;
    }
    h3{ margin: 16px 0 10px; }
    p{ margin: 10px 0 12px; }
    small{ color:var(--muted); }
    .pill{ display:inline-block; background:#eef6ff; color:#084b83; border:1px solid #d7eaff; padding:.2em .6em; border-radius:999px; font-size:.85em; }

    /* Layouts */
    .row{ display:flex; flex-wrap:wrap; gap:18px; align-items:flex-start; }
    .pair{ display:grid; grid-template-columns: 1fr 1fr; gap:18px; }
    @media (max-width: 1100px){ .pair{ grid-template-columns: 1fr; } }

    /* Card + big images */
    figure{
      margin:0; background:var(--card); border:1px solid var(--rule);
      border-radius:12px; padding:14px; box-shadow:2px 2px 8px rgba(0,0,0,.08);
    }
    figcaption{ margin-top:8px; color:var(--muted); font-size:.95rem; }
    /* BIG sizes */
    .big img{ width:100%; max-width: 820px; height:auto; border-radius:8px; border:1px solid #eee; }
    /* A.1 pairs even bigger */
    .huge img{ width:100%; max-width: 980px; height:auto; border-radius:8px; border:1px solid #eee; }
    /* A.3 combined result wide */
    .wide img{ width:100%; max-width: 1000px; height:auto; border-radius:8px; border:1px solid #eee; }

    ul{ margin: 8px 0 0 18px; }
    .footer{ margin-top:40px; padding-top:14px; border-top:1px solid var(--rule); display:flex; gap:10px; flex-wrap:wrap; }
    a.button{
      display:inline-block; text-decoration:none; color:#fff; background:var(--accent);
      padding:10px 16px; border-radius:10px; font-weight:700;
    }
    a.button:hover{ background:var(--accent2); }
  </style>
</head>
<body>

  <h1>Image Warping & Mosaicing — A.1 to A.4</h1>

  <h2>Overview</h2>
  <p>
    Pipeline: <span class="pill">A.1</span> capture projectively related images (rotate in place),
    <span class="pill">A.2</span> estimate homographies from correspondences,
    <span class="pill">A.3</span> inverse warp with nearest &amp; bilinear (plus rectification),
    <span class="pill">A.4</span> feather-blend into mosaics.
  </p>

  <!-- ====================== A.1 ====================== -->
  <h2>A.1 — Shoot the Pictures (Bigger Pairs)</h2>
  <p>Each set below shows a pair of photos (JPGs only for A.1), captured by rotating about a fixed COP with 40–70% overlap.</p>

  <!-- Set 1: pair (JPG) -->
  <h3>Set 1</h3>
  <div class="pair">
    <figure class="huge">
      <img src="./media/a1_set1_img1.jpg" alt="A.1 Set 1 image 1">
      <figcaption>Set 1 — Image 1 (JPG)</figcaption>
    </figure>
    <figure class="huge">
      <img src="./media/a1_set1_img2.jpg" alt="A.1 Set 1 image 2">
      <figcaption>Set 1 — Image 2 (JPG)</figcaption>
    </figure>
  </div>

  <!-- Set 2: pair (JPG) -->
  <h3>Set 2</h3>
  <div class="pair">
    <figure class="huge">
      <img src="./media/a1_set2_img1.jpg" alt="A.1 Set 2 image 1">
      <figcaption>Set 2 — Image 1 (JPG)</figcaption>
    </figure>
    <figure class="huge">
      <img src="./media/a1_set2_img2.jpg" alt="A.1 Set 2 image 2">
      <figcaption>Set 2 — Image 2 (JPG)</figcaption>
    </figure>
  </div>

  <!-- Set 3: pair (JPG) -->
  <h3>Set 3</h3>
  <div class="pair">
    <figure class="huge">
      <img src="./media/a1_set3_img1.jpg" alt="A.1 Set 3 image 1">
      <figcaption>Set 3 — Image 1 (JPG)</figcaption>
    </figure>
    <figure class="huge">
      <img src="./media/a1_set3_img2.jpg" alt="A.1 Set 3 image 2">
      <figcaption>Set 3 — Image 2 (JPG)</figcaption>
    </figure>
  </div>

  <!-- ====================== A.2 ====================== -->
  <h2>A.2 — Recover Homographies (Bigger Visuals)</h2>
  <p>For each pair, I clicked ≥8 correspondences and solved <code>A h = b</code> to get <code>H</code>. The overlays and matrices are below.</p>

  <div class="row">
    <figure class="big">
      <img src="./media/a2_pair1_points.png" alt="A.2 Pair 1 correspondences (large)">
      <figcaption>Pair 1 overlay (large). <small>See <code>media/a2_pair1_H.txt</code> for 3×3 <code>H</code>.</small></figcaption>
    </figure>
  </div>

  <div class="row">
    <figure class="big">
      <img src="./media/a2_pair2_points.png" alt="A.2 Pair 2 correspondences (large)">
      <figcaption>Pair 2 overlay (large). <small>See <code>media/a2_pair2_H.txt</code> for 3×3 <code>H</code>.</small></figcaption>
    </figure>
  </div>

  <!-- ====================== A.3 ====================== -->
  <h2>A.3 — Warp & Rectify (Exactly 3 Images)</h2>
  <p>Two unrectified inputs (left/right), and one combined rectified result containing the outputs for both.</p>

  <div class="pair">
    <figure class="big">
      <img src="./media/a3_before_left.jpg" alt="A.3 before left (PNG)">
      <figcaption>Before (Left)</figcaption>
    </figure>
    <figure class="big">
      <img src="./media/a3_before_right.jpg" alt="A.3 before right (PNG)">
      <figcaption>Before (Right)</figcaption>
    </figure>
  </div>

  <div class="row" style="margin-top:12px;">
    <figure class="wide">
      <img src="./media/a3_rect_combined.png" alt="A.3 combined rectified results (PNG)">
      <figcaption>After (Combined Rectified Results)</figcaption>
    </figure>
  </div>

  <!-- ====================== A.4 ====================== -->
  <h2>A.4 — Mosaic Blending</h2>
  <p>Images are registered to a common canvas and feather-blended (distance-to-edge weights × alpha coverage).</p>

  <div class="row">
    <figure class="big">
      <img src="./media/a4_mosaic1.png" alt="Mosaic 1">
      <figcaption>Mosaic 1</figcaption>
    </figure>
  </div>
  <div class="row">
    <figure class="big">
      <img src="./media/a4_mosaic2.png" alt="Mosaic 2">
      <figcaption>Mosaic 2</figcaption>
    </figure>
  </div>
  <div class="row">
    <figure class="big">
      <img src="./media/a4_mosaic3.png" alt="Mosaic 3">
      <figcaption>Mosaic 3</figcaption>
    </figure>
  </div>

  <h2>Notes</h2>
  <ul>
    <li>Planarity of clicked points strongly affects alignment quality.</li>
    <li>Nearest neighbor is fast; bilinear reduces aliasing/ghosting.</li>
    <li>Feathering minimizes seams; Laplacian pyramid can further reduce high-freq ghosting (optional).</li>
  </ul>

  <div class="footer">
    <a class="button" href="./media/a2_pair1_H.txt" download>Download H — Pair 1</a>
    <a class="button" href="./media/a2_pair2_H.txt" download>Download H — Pair 2</a>
  </div>
</body>
</html>
