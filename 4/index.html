<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Project: Homographies, Warping, and Mosaics</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --ink:#222; --muted:#555; --bg:#fdfdfd; --card:#fff;
      --accent:#007acc; --accent2:#005fa3; --soft:#f0f8ff; --rule:#ddd;
    }
    *{box-sizing:border-box}
    body{
      font-family: "Segoe UI", Arial, sans-serif;
      margin: 30px;
      line-height: 1.6;
      background: var(--bg);
      color: var(--ink);
    }
    h1{
      text-align: center;
      margin-bottom: 25px;
      font-size: 2.2em;
      color: var(--ink);
      letter-spacing: 0.5px;
    }
    h2{
      margin-top: 40px;
      padding-left: 12px;
      font-size: 1.5em;
      font-weight: 600;
      color: #005fa3;
      border-left: 6px solid var(--accent);
      background: linear-gradient(to right, var(--soft), #ffffff);
      border-radius: 4px;
      padding-top: 6px;
      padding-bottom: 6px;
    }
    h3{ margin: 14px 0 4px; }
    small{ display:block; font-size:.85em; color:var(--muted); margin-top:4px; }
    p{ margin: 12px 0; }
    code, pre{
      background:#f6f8fa; border:1px solid #eee; border-radius:6px;
      padding: 2px 6px; font-size: .95em;
    }
    pre{
      padding: 10px 12px; overflow:auto; white-space:pre-wrap; word-break:break-word;
    }
    .row{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
    .cap{ min-width:260px; }
    .grid{ display:flex; flex-wrap:wrap; gap:12px; }
    figure{
      margin:0; background:var(--card); border:1px solid var(--rule);
      border-radius:10px; padding:10px; box-shadow:2px 2px 6px rgba(0,0,0,0.08);
      max-width: 340px;
    }
    figure img{
      width:100%; height:auto; border-radius:6px; border:1px solid #eee;
      transition: transform .15s ease;
    }
    figure img:hover{ transform:scale(1.02); }
    figcaption{ font-size:.92em; color:var(--muted); margin-top:6px; }
    .pill{ display:inline-block; background:#eef6ff; color:#084b83; border:1px solid #d7eaff; padding:.2em .55em; border-radius:999px; font-size:.85em; }
    .split{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
    .three{ display:grid; grid-template-columns: 1fr 1fr 1fr; gap:12px; }
    .callout{
      border-left: 4px solid var(--accent); background:#f7fbff; padding:10px 12px; border-radius:6px;
    }
    .footer{
      margin-top: 40px; padding-top: 12px; border-top:1px solid var(--rule);
      display:flex; gap:10px; flex-wrap:wrap;
    }
    a.button{
      display:inline-block; text-decoration:none; color:#fff; background:var(--accent);
      padding:8px 14px; border-radius:8px; font-weight:600;
    }
    a.button:hover{ background:var(--accent2); }
    @media (max-width: 1100px){ .three{ grid-template-columns: 1fr; } }
    @media (max-width: 900px){ .split{ grid-template-columns: 1fr; } }
  </style>
</head>
<body>

  <h1>Image Warping & Mosaicing (A.1–A.4)</h1>

  <h2>Overview</h2>
  <p>
    This project implements the full pipeline for planar image mosaicing:
    <span class="pill">A.1</span> capture projectively related images by rotating about a fixed center of projection,
    <span class="pill">A.2</span> recover homographies from correspondences,
    <span class="pill">A.3</span> inverse-warp with nearest &amp; bilinear interpolation (including rectification),
    and <span class="pill">A.4</span> blend registered images into mosaics via feathered alpha weights.
  </p>

  <!-- ====================== A.1 ====================== -->
  <h2>A.1 – Shoot the Pictures</h2>
  <p>
    I captured photo sets by rotating the camera in place (fixed COP). Each set has 40–70% overlap
    and avoids fisheye/barrel distortion. Below are three sets. 
    <strong>Note:</strong> A.1 assets are JPGs by requirement.
  </p>

  <!-- Set 1 -->
  <h3>Set 1</h3>
  <div class="row">
    <figure>
      <img src="./media/a1_set1_img1.jpg" alt="A.1 Set 1 image 1">
      <figcaption>Set 1 – Image 1 (JPG)</figcaption>
    </figure>
    <figure>
      <img src="./media/a1_set1_img2.jpg" alt="A.1 Set 1 image 2">
      <figcaption>Set 1 – Image 2 (JPG)</figcaption>
    </figure>
    <figure>
      <img src="./media/a1_set1_img3.jpg" alt="A.1 Set 1 image 3">
      <figcaption>Set 1 – Image 3 (JPG)</figcaption>
    </figure>
  </div>

  <!-- Set 2 -->
  <h3>Set 2</h3>
  <div class="row">
    <figure>
      <img src="./media/a1_set2_img1.jpg" alt="A.1 Set 2 image 1">
      <figcaption>Set 2 – Image 1 (JPG)</figcaption>
    </figure>
    <figure>
      <img src="./media/a1_set2_img2.jpg" alt="A.1 Set 2 image 2">
      <figcaption>Set 2 – Image 2 (JPG)</figcaption>
    </figure>
    <figure>
      <img src="./media/a1_set2_img3.jpg" alt="A.1 Set 2 image 3">
      <figcaption>Set 2 – Image 3 (JPG)</figcaption>
    </figure>
  </div>

  <!-- Set 3 (pair) -->
  <h3>Set 3 (Pair)</h3>
  <div class="row">
    <figure>
      <img src="./media/a1_set3_img1.jpg" alt="A.1 Set 3 image 1">
      <figcaption>Set 3 – Image 1 (JPG)</figcaption>
    </figure>
    <figure>
      <img src="./media/a1_set3_img2.jpg" alt="A.1 Set 3 image 2">
      <figcaption>Set 3 – Image 2 (JPG)</figcaption>
    </figure>
  </div>

  <!-- ====================== A.2 ====================== -->
  <h2>A.2 – Recover Homographies</h2>
  <p>
    For each image pair, I selected ≥8 corresponding points and solved the linear system
    <code>A h = b</code> for the 8 unknowns in <code>H</code> (with <code>H[2,2]=1</code>).
    Below: point overlays and the recovered <code>H</code> matrices.
  </p>

  <div class="grid">
    <figure>
      <img src="./media/a2_pair1_points.png" alt="A.2 Pair 1 point overlays">
      <figcaption>
        Pair 1: correspondences (yellow).<br>
        <small><strong>H (im1→im2)</strong> in <code>media/a2_pair1_H.txt</code>.</small>
      </figcaption>
    </figure>

    <figure>
      <img src="./media/a2_pair2_points.png" alt="A.2 Pair 2 point overlays">
      <figcaption>
        Pair 2: correspondences (yellow).<br>
        <small><strong>H (im1→im2)</strong> in <code>media/a2_pair2_H.txt</code>.</small>
      </figcaption>
    </figure>
  </div>

  <div class="callout" style="margin-top:12px;">
    <strong>System of equations:</strong>
    For each match <code>(x,y)↔(u,v)</code>:
    <pre>[x y 1  0 0 0  -u·x  -u·y] · [a b c d e f g h]^T = u
[0 0 0  x y 1  -v·x  -v·y] · [a b c d e f g h]^T = v</pre>
    Then <code>H = [[a b c],[d e f],[g h 1]]</code>.
  </div>

  <!-- ====================== A.3 ====================== -->
  <h2>A.3 – Warp the Images & Rectification</h2>
  <p>
    Using inverse warping, I implemented <code>warpImageNearestNeighbor</code> (fast) and
    <code>warpImageBilinear</code> (smooth). For rectification, I click 4 corners of a planar object
    and map them to a square canvas.
  </p>

  <!-- Two original (unrectified) inputs -->
  <div class="split">
    <figure>
      <img src="./media/a3_rect_input1.png" alt="Unrectified Input 1">
      <figcaption>Unrectified Input 1</figcaption>
    </figure>
    <figure>
      <img src="./media/a3_rect_input2.png" alt="Unrectified Input 2">
      <figcaption>Unrectified Input 2</figcaption>
    </figure>
  </div>

  <!-- One combined rectified results image -->
  <h3 style="margin-top:14px;">Rectified Results (Combined)</h3>
  <div class="row">
    <img src="./media/a3_rect_combined.png" alt="Combined rectified results" style="max-width:720px;">
  </div>

  <!-- Optional comparison of interpolation methods for clarity -->
  <div class="grid" style="margin-top:12px;">
    <figure>
      <img src="./media/a3_warp_pair_nn.png" alt="Warp pair NN">
      <figcaption>Pair warp into reference (Nearest Neighbor).</figcaption>
    </figure>
    <figure>
      <img src="./media/a3_warp_pair_bilinear.png" alt="Warp pair Bilinear">
      <figcaption>Pair warp into reference (Bilinear).</figcaption>
    </figure>
  </div>

  <!-- ====================== A.4 ====================== -->
  <h2>A.4 – Mosaic Blending</h2>
  <p>
    After registering each image into a single canvas, I blend them with feathered weights
    (distance-to-edge) multiplied by coverage (alpha). Below are three mosaics and the sources used.
  </p>

  <h3>Mosaic 1</h3>
  <div class="row">
    <div class="cap">
      <small>Sources</small>
      <div class="pill">IMG_A</div>
      <div class="pill">IMG_B</div>
      <div class="pill">IMG_C</div>
    </div>
    <img src="./media/a4_mosaic1.png" alt="Mosaic 1">
  </div>

  <h3>Mosaic 2</h3>
  <div class="row">
    <div class="cap">
      <small>Sources</small>
      <div class="pill">IMG_1</div>
      <div class="pill">IMG_2</div>
    </div>
    <img src="./media/a4_mosaic2.png" alt="Mosaic 2">
  </div>

  <h3>Mosaic 3</h3>
  <div class="row">
    <div class="cap">
      <small>Sources</small>
      <div class="pill">IMG_x</div>
      <div class="pill">IMG_y</div>
      <div class="pill">IMG_z</div>
    </div>
    <img src="./media/a4_mosaic3.png" alt="Mosaic 3">
  </div>

  <h2>Notes on Quality</h2>
  <ul>
    <li><strong>Planarity:</strong> points should lie on (or close to) a single plane.</li>
    <li><strong>Overlap:</strong> target ~40–70% overlap for easier registration.</li>
    <li><strong>Interpolation:</strong> nearest is fast; bilinear reduces aliasing.</li>
    <li><strong>Feathering:</strong> distance-to-edge weights reduce seams; multiply by alpha coverage.</li>
  </ul>

  <div class="footer">
    <a class="button" href="./media/a2_pair1_H.txt" download>Download H (Pair 1)</a>
    <a class="button" href="./media/a2_pair2_H.txt" download>Download H (Pair 2)</a>
  </div>
</body>
</html>
