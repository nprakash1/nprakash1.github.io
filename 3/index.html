<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>CS180 Project 2 — Fun with Filters and Frequencies</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --ink:#222; --muted:#666; --brand:#005fa3; --brand-2:#007acc; --paper:#fdfdfd; --panel:#f7fbff;
      --card:#fff; --rule:#e6eef7;
    }
    *{box-sizing:border-box}
    body{font-family: "Segoe UI", Arial, sans-serif; margin:28px; color:var(--ink); background:var(--paper); line-height:1.6}
    h1{font-size:2.2rem; text-align:center; margin:0 0 22px}
    header .meta{display:flex; gap:12px; justify-content:center; color:var(--muted); font-size:.95rem; margin-bottom:22px}
    h2{margin:38px 0 12px; padding:8px 12px; border-left:6px solid var(--brand-2); background:linear-gradient(90deg, var(--panel), #fff); border-radius:6px; color:var(--brand)}
    h3{margin:18px 0 8px}
    p{margin:10px 0}
    .grid{display:grid; gap:12px}
    .g2{grid-template-columns: repeat(2, minmax(0,1fr))}
    .g3{grid-template-columns: repeat(3, minmax(0,1fr))}
    .g4{grid-template-columns: repeat(4, minmax(0,1fr))}
    .card{background:var(--card); border:1px solid var(--rule); border-radius:10px; padding:12px}
    figure{margin:0; display:flex; flex-direction:column; align-items:center}
    figcaption{font-size:.9rem; color:var(--muted); margin-top:6px}
    img{max-width:100%; height:auto; border-radius:8px; border:1px solid #ddd; box-shadow:0 1px 4px rgba(0,0,0,.08)}
    code{background:#f6f8fa; border:1px solid #eaeef2; padding:.1rem .35rem; border-radius:5px}
    .row{display:flex; flex-wrap:wrap; gap:12px}
    .kv{display:flex; flex-wrap:wrap; gap:6px 18px; color:var(--muted); font-size:.95rem}
    .note{font-size:.95rem; color:var(--muted)}
    .footer{margin:36px 0 12px; text-align:center; color:var(--muted)}
    @media (max-width:900px){ .g3,.g4{grid-template-columns: repeat(2, minmax(0,1fr))} }
    @media (max-width:640px){ .g2,.g3,.g4{grid-template-columns: 1fr} body{margin:18px} }
  </style>
</head>
<body>
  <header>
    <h1>CS180 Project 2 — Fun with Filters and Frequencies</h1>
    <div class="meta">
      <span>Programming Project #2 (CS180 only)</span>
      <span>Due: Sep 26, 2025</span>
    </div>
  </header>

  <section id="overview">
    <h2>Overview</h2>
    <p>
      This project explores linear filtering, edge detection, and frequency-based image manipulations.
      Part 1 builds convolution intuition via finite differences and the Derivative of Gaussian.
      Part 2 applies these ideas to unsharp masking, hybrid images, and multi-resolution blending (Gaussian/Laplacian stacks).
      Alignment, cutoff choices, and mask design strongly influence visual quality.
    </p>
  </section>

  <!-- ===================== Part 1 ===================== -->
  <section id="part1">
    <h2>Part 1 — Fun with Filters</h2>

    <h3>1.1 Convolutions from Scratch</h3>
    <p>
      I implemented convolution twice: a four-loop baseline and a faster two-loop version using block multiply–sum.
      Zero padding keeps output size equal to input but slightly darkens borders.
      Results numerically match <code>scipy.signal.convolve2d</code> with <code>boundary='fill'</code>.
      On my selfie, the 9×9 box filter smooths texture, while Dx/Dy highlight strong transitions.
    </p>
    <div class="grid g3">
      <figure class="card">
        <img src="./media/part1_1_selfie_gray.png" alt="Selfie grayscale">
        <figcaption>Input selfie (grayscale)</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/part1_1_box9x9.png" alt="Box filter result">
        <figcaption>9×9 box-filtered</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/part1_1_dx_dy.png" alt="Dx Dy">
        <figcaption>Dx / Dy responses</figcaption>
      </figure>
    </div>

    <h3>1.2 Finite Difference Operator</h3>
    <p>
      I convolved Cameraman with <code>Dx=[1,-1]</code> and <code>Dy=[1;-1]</code> and formed magnitude <code>√(gx²+gy²)</code>.
      A threshold τ selects edges; I chose a value that retained object boundaries while suppressing noise.
      Finite differences produce thin, sometimes noisy edges in flat regions.
      Careful τ tuning balances completeness and denoising.
    </p>
    <div class="grid g4">
      <figure class="card">
        <img src="./media/part1_2_cam_gx.png" alt="gx">
        <figcaption>∂I/∂x</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/part1_2_cam_gy.png" alt="gy">
        <figcaption>∂I/∂y</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/part1_2_cam_mag.png" alt="magnitude">
        <figcaption>Gradient magnitude</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/part1_2_cam_edges.png" alt="edges">
        <figcaption>Binarized edges (τ)</figcaption>
      </figure>
    </div>

    <h3>1.3 Derivative of Gaussian (DoG)</h3>
    <p>
      Pre-smoothing with a Gaussian reduces noise before computing derivatives.
      DoG applies the derivative to the kernel, achieving blur+diff in a single convolution.
      My DoG gradients match the two-step blur→diff results within floating-point error.
      Edges are cleaner and less noisy than plain finite differences.
    </p>
    <div class="grid g3">
      <figure class="card">
        <img src="./media/part1_3_dogx.png" alt="DoGx">
        <figcaption>DoG<sub>x</sub> kernel</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/part1_3_dogy.png" alt="DoGy">
        <figcaption>DoG<sub>y</sub> kernel</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/part1_3_dog_edges.png" alt="DoG edges">
        <figcaption>DoG edges vs blur→diff</figcaption>
      </figure>
    </div>
  </section>

  <!-- ===================== Part 2 ===================== -->
  <section id="part2">
    <h2>Part 2 — Applications</h2>

    <h3>2.1 Image “Sharpening” (Unsharp Mask)</h3>
    <p>
      Unsharp mask adds scaled high frequencies: <code>I + α·(I − Gσ*I)</code>.
      Increasing α sharpens edges but can introduce halos and amplify noise; larger σ gives broader, more global crispness.
      For Taj and another image, I show blurred, high-frequency, and sharpened panels at multiple α.
      Blurring a sharp image then sharpening recovers contrast but cannot fully restore lost fine detail.
    </p>
    <div class="grid g3">
      <figure class="card">
        <img src="./media/part2_1_taj_blur.png" alt="Taj blur">
        <figcaption>Taj: blurred</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/part2_1_taj_hi.png" alt="Taj high freq">
        <figcaption>Taj: high frequencies</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/part2_1_taj_sharp.png" alt="Taj sharpened">
        <figcaption>Taj: sharpened (α variants)</figcaption>
      </figure>
    </div>
    <div class="grid g3">
      <figure class="card">
        <img src="./media/part2_1_other_orig.png" alt="Other orig">
        <figcaption>Other image: original</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/part2_1_other_blur.png" alt="Other blur">
        <figcaption>Blurred then sharpened</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/part2_1_other_compare.png" alt="Compare">
        <figcaption>Compare to original (still softer)</figcaption>
      </figure>
    </div>

    <h3>2.2 Hybrid Images</h3>
    <p>
      A hybrid combines low-pass A with high-pass B so perception changes with viewing distance.
      I manually aligned images via two landmarks (scale/rotation) to avoid double features.
      Cutoffs (σ<sub>low</sub>, σ<sub>high</sub>) were tuned to balance near-view detail and far-view clarity.
      FFT log-magnitude plots confirm band separation and the composite spectrum.
    </p>
    <div class="grid g4">
      <figure class="card">
        <img src="./media/part2_2_A.png" alt="A">
        <figcaption>Low-pass source (A)</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/part2_2_B.png" alt="B">
        <figcaption>High-pass source (B)</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/part2_2_filtered.png" alt="filtered">
        <figcaption>Filtered A/B</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/part2_2_hybrid.png" alt="hybrid">
        <figcaption>Hybrid result</figcaption>
      </figure>
    </div>
    <p class="note">Additional hybrids (orig + result) are shown in the gallery section of the page.</p>

    <h3>2.3 Gaussian & Laplacian Stacks</h3>
    <p>
      Stacks repeatedly blur without downsampling, keeping full resolution at every level.
      Laplacian levels isolate detail bands from fine (L₀) to coarse (deep levels), with the top Gaussian holding overall color/illumination.
      For Apple/Orange, I visualize G₀…G₅ and L₀…L₄+G₅ and reproduce contributions like Szelski Fig. 3.42.
      These stacks are the basis for smooth, frequency-aware blending.
    </p>
    <div class="grid g3">
      <figure class="card">
        <img src="./media/part2_3_gaussian_grid.png" alt="Gaussian stack">
        <figcaption>Gaussian stack (Apple/Orange)</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/part2_3_laplacian_grid.png" alt="Laplacian stack">
        <figcaption>Laplacian stack</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/part2_3_fig342.png" alt="Fig 3.42 recreation">
        <figcaption>Fig. 3.42 (a–l) recreation</figcaption>
      </figure>
    </div>

    <h3>2.4 Multiresolution Blending (Oraple)</h3>
    <p>
      For each level i, I blend Laplacians via <code>Lᵢ = Mᵢ·Lᵢ(A) + (1−Mᵢ)·Lᵢ(B)</code> using the mask’s Gaussian stack Mᵢ, then reconstruct.
      Coarse levels use blurrier masks, creating wide smooth transitions; fine levels restrict seams to tiny regions.
      Vertical/horizontal seams and an irregular mask show clean, nearly invisible boundaries.
      Results include Apple+Orange plus two custom blends with a circular mask.
    </p>
    <div class="grid g3">
      <figure class="card">
        <img src="./media/part2_4_inputs_masks.png" alt="Inputs & masks">
        <figcaption>Inputs & masks (vertical/horizontal/irregular)</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/part2_4_oraple_vh.png" alt="Oraple seams">
        <figcaption>Oraple (vertical & horizontal seams)</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/part2_4_irregular.png" alt="Irregular">
        <figcaption>Irregular mask blend</figcaption>
      </figure>
    </div>
  </section>

  <!-- ===================== Reflection ===================== -->
  <section id="reflection">
    <h2>Reflection</h2>
    <p>
      I learned how classic linear filters explain edges, sharpening, and blending in one framework.
      Hybrid images showed how perception depends on frequency and alignment; small misalignments ruin the effect.
      Unsharp masking is powerful but limited—once blur removes detail, sharpening can’t truly restore it.
      Multiresolution blending felt “seamless” once masks were smoothed per level, confirming the value of frequency-aware seams.
    </p>
  </section>

  <section id="gallery">
    <h2>Gallery (Selected Results)</h2>
    <div class="grid g4">
      <figure class="card">
        <img src="./media/hybrid_1.png" alt="Hybrid 1">
        <figcaption>Hybrid #1</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/hybrid_2.png" alt="Hybrid 2">
        <figcaption>Hybrid #2</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/blend_1.png" alt="Blend 1">
        <figcaption>Blend with vertical seam</figcaption>
      </figure>
      <figure class="card">
        <img src="./media/blend_2.png" alt="Blend 2">
        <figcaption>Blend with irregular mask</figcaption>
      </figure>
    </div>
    <p class="note">All figures kept under ~0.8&nbsp;MB per the project guidance.</p>
  </section>

  <footer class="footer">
    <p>© 2025 — CS180: Intro to Computer Vision and Computational Photography</p>
  </footer>
</body>
</html>
