<!DOCTYPE html>
<html>
<head>
  <title>Project 1</title>
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      margin: 30px;
      line-height: 1.6;
      background-color: #fdfdfd;
      color: #333;
    }
    h1 {
      text-align: center;
      margin-bottom: 25px;
      font-size: 2.2em;
      color: #222;
      letter-spacing: 1px;
    }
    h2 {
      margin-top: 40px;
      padding-left: 12px;
      font-size: 1.5em;
      font-weight: 600;
      color: #005fa3;
      border-left: 6px solid #007acc;
      background: linear-gradient(to right, #f0f8ff, #ffffff);
      border-radius: 4px;
      padding-top: 6px;
      padding-bottom: 6px;
    }
    small { display:block; font-size: .85em; color:#555; margin-top: 4px; }
    img {
      max-width: 300px;
      border: 2px solid #ddd;
      border-radius: 8px;
      margin: 12px;
      box-shadow: 2px 2px 6px rgba(0,0,0,0.15);
      transition: transform 0.2s ease;
    }
    img:hover { transform: scale(1.02); }
    .back a {
      display: inline-block; margin-top: 30px; text-decoration: none; color: #fff;
      background: #007acc; padding: 8px 14px; border-radius: 6px; font-weight: 500;
    }
    .back a:hover { background: #005fa3; }
    .row { display:flex; flex-wrap: wrap; align-items: center; }
    .cap { min-width: 260px; }
  </style>
</head>
<body>
  <h1>Project 1: Colorizing the Prokudin-Gorskii Collection</h1>

  <h2>Overview</h2>
  <p>
    The goal of this project is to reconstruct color photographs from glass plate negatives that existed in the 1900s. Each image that is processed contains the separate, grayscale RGB components of the final image taken through filters. The main idea is to align these separate channels and combine them into one image, although this can be challenging due to differences in lighting/allignment. The final image should outputted cleanly with minimal distortion and appropriate cropping.
  </p>

  <h2>Methodology</h2>
  <p>
    First the glass plate must be split into the RGB layers. I  use the blue channel as the reference layer, and shift the green and red until they align as best as possible. The “score” of a given alignment can be generated by using Normalized Cross Correlation (NCC) between to images, which normalizes each separately then finds the average of the pixel wise multiplications. A score closer to 1 is better. Instead of taking raw pixel values, an optimization with edge maps instead of raw pixels can be used, to rely on structural components instead of potential brightness differences. To deal with larger TIF images, a pyramid search technique is used. A downsampled version of the image is first aligned, and the best shift is estimated. Then the image is scaled up along with the shift accordingly, and the shift is refined. The shift gets progressively refined until full resolution. Using the best shifts for each channel and using np.roll, the final output image is generated.
  </p>

  <h2>Automatic Results (shifts are <code>(dy, dx)</code>)</h2>

  <div class="row"><div class="cap"><h3>cathedral.jpg <small>G=(5, 2), R=(12, 3)</small></h3></div><img src="./media/cathedral_aligned.jpg" alt="cathedral"></div>
  <div class="row"><div class="cap"><h3>church.tif <small>G=(25, 4), R=(58, -4)</small></h3></div><img src="./media/church_aligned.jpg" alt="church"></div>
  <div class="row"><div class="cap"><h3>emir.tif <small>G=(49, 24), R=(107, 41)</small></h3></div><img src="./media/emir_aligned.jpg" alt="emir"></div>
  <div class="row"><div class="cap"><h3>harvesters.tif <small>G=(60, 18), R=(123, 14)</small></h3></div><img src="./media/harvesters_aligned.jpg" alt="harvesters"></div>
  <div class="row"><div class="cap"><h3>icon.tif <small>G=(41, 18), R=(90, 23)</small></h3></div><img src="./media/icon_aligned.jpg" alt="icon"></div>
  <div class="row"><div class="cap"><h3>italil.tif <small>G=(38, 22), R=(77, 36)</small></h3></div><img src="./media/italil_aligned.jpg" alt="italil"></div>
  <div class="row"><div class="cap"><h3>lastochikino.tif <small>G=(-3, -2), R=(75, -8)</small></h3></div><img src="./media/lastochikino_aligned.jpg" alt="lastochikino"></div>
  <div class="row"><div class="cap"><h3>lugano.tif <small>G=(41, -16), R=(93, -29)</small></h3></div><img src="./media/lugano_aligned.jpg" alt="lugano"></div>
  <div class="row"><div class="cap"><h3>melons.tif <small>G=(81, 10), R=(178, 13)</small></h3></div><img src="./media/melons_aligned.jpg" alt="melons"></div>
  <div class="row"><div class="cap"><h3>monastery.jpg <small>G=(-3, 2), R=(3, 2)</small></h3></div><img src="./media/monastery_aligned.jpg" alt="monastery"></div>
  <div class="row"><div class="cap"><h3>self_portrait.tif <small>G=(78, 29), R=(175, 37)</small></h3></div><img src="./media/self_portrait_aligned.jpg" alt="self portrait"></div>
  <div class="row"><div class="cap"><h3>siren.tif <small>G=(49, -5), R=(96, -24)</small></h3></div><img src="./media/siren_aligned.jpg" alt="siren"></div>
  <div class="row"><div class="cap"><h3>three_generations.tif <small>G=(52, 13), R=(111, 10)</small></h3></div><img src="./media/three_generations_aligned.jpg" alt="three generations"></div>
  <div class="row"><div class="cap"><h3>tobolsk.jpg <small>G=(3, 3), R=(7, 3)</small></h3></div><img src="./media/tobolsk_aligned.jpg" alt="tobolsk"></div>

  <h2>Manually Selected Examples</h2>
  <div class="row"><div class="cap"><h3>np_camel.tif <small>G=(18, 14), R=(78, 33)</small></h3></div><img src="./media/np_camel_aligned.jpg" alt="np camel"></div>
  <div class="row"><div class="cap"><h3>np_kapri.tif <small>G=(31, -16), R=(78, -25)</small></h3></div><img src="./media/np_kapri_aligned.jpg" alt="np kapri"></div>
  <div class="row"><div class="cap"><h3>np_mosque.tif <small>G=(32, 6), R=(79, 8)</small></h3></div><img src="./media/np_mosque_aligned.jpg" alt="np mosque"></div>

  <p class="back"><a href="../index.html">⬅ Back to main page</a></p>
</body>
</html>
